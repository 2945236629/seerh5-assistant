{"version":3,"file":"TeamTechCenter.js","sources":["../src/module/TeamTechCenter.ts"],"sourcesContent":["import { Socket } from 'sa-core';\r\n\r\nclass TeamTechCenter implements SAMod.IModuleMod<team.TeamTech> {\r\n    declare logger: typeof console.log;\r\n\r\n    meta: SAMod.MetaData = {\r\n        id: 'teamTechCenter',\r\n        author: 'median',\r\n        type: 'module' as const,\r\n        description: '精灵科技中心模块注入, 提供一键强化到满级功能',\r\n    };\r\n\r\n    moduleName = 'team';\r\n\r\n    load() {\r\n        team.TeamTech.prototype.onClickEnhance = async function () {\r\n            const index = this.list_attr.selectedIndex;\r\n            if (null == this._petInfo) {\r\n                Alarm.show('先选择你要进行强化的精灵哦！');\r\n                return;\r\n            }\r\n            if (this.getMax(index) <= this._petInfo.getTeamTechAdd(index)[0]) {\r\n                BubblerManager.getInstance().showText('已完成该项属性值的战队加成！');\r\n                return;\r\n            }\r\n            if (this.getNeedCost(index) > this._costNum) {\r\n                BubblerManager.getInstance().showText('你的战队贡献值不足！');\r\n                return;\r\n            }\r\n\r\n            const updateOnce = (): Promise<void> =>\r\n                Socket.sendByQueue(CommandID.NEW_TEAM_PET_RISE, [this._petInfo.catchTime, index])\r\n                    .then(() => PetManager.UpdateBagPetInfoAsynce(this._petInfo.catchTime))\r\n                    .then((petInfo) => {\r\n                        this._petInfo = petInfo;\r\n                        this.updateData();\r\n                        this.showPetDetail();\r\n                        this.onTouchAttr();\r\n                        if (this.getMax(index) > this._petInfo.getTeamTechAdd(index)[0]) {\r\n                            return updateOnce();\r\n                        } else {\r\n                            BubblerManager.getInstance().showText('一键强化成功！');\r\n                            return;\r\n                        }\r\n                    });\r\n            await updateOnce();\r\n        };\r\n    }\r\n}\r\n\r\nexport default TeamTechCenter;\r\n"],"names":["TeamTechCenter","__publicField","index","updateOnce","petInfo"],"mappings":";;;AAEA,MAAAA,EAAA;AAAA,EAAA;AAAgE,IAAAC,EAAA,cAAA;AAAA,MAGrC,IAAA;AAAA,MACf,QAAA;AAAA,MACI,MAAA;AAAA,MACF,aAAA;AAAA,IACO;AACjB,IAAAA,EAAA,oBAAA;AAAA;AAAA,EAEa,OAAA;AAGT,SAAA,SAAA,UAAA,iBAAA,iBAAA;AACI,YAAAC,IAAA,KAAA,UAAA;AACA,UAAA,KAAA,YAAA,MAAA;AACI,cAAA,KAAA,gBAAA;AACA;AAAA;AAEJ,UAAA,KAAA,OAAAA,CAAA,KAAA,KAAA,SAAA,eAAAA,CAAA,EAAA,CAAA,GAAA;AACI,uBAAA,YAAA,EAAA,SAAA,gBAAA;AACA;AAAA;AAEJ,UAAA,KAAA,YAAAA,CAAA,IAAA,KAAA,UAAA;AACI,uBAAA,YAAA,EAAA,SAAA,YAAA;AACA;AAAA;AAGJ,YAAAC,IAAA,MACI,IAAA,OAAA,YAAA,UAAA,mBAAA,CAAA,KAAA,SAAA,WAAAD,CAAA,CAAA,EAAA,KAAA,MAAA,WAAA,uBAAA,KAAA,SAAA,SAAA,CAAA,EAAA,KAAA,CAAAE,MAAA;AAOQ,YAJA,KAAA,WAAAA,GACA,KAAA,WAAA,GACA,KAAA,cAAA,GACA,KAAA,YAAA,GACA,KAAA,OAAAF,CAAA,IAAA,KAAA,SAAA,eAAAA,CAAA,EAAA,CAAA;AACI,iBAAAC,EAAA;AAEA,uBAAA,YAAA,EAAA,SAAA,SAAA;AAAA,MAEJ,CAAA;AAEZ,YAAAA,EAAA;AAAA,IAAiB;AAAA,EACrB;AAER;"}